<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.Separator?>
<?import javafx.scene.control.TableColumn?>
<?import javafx.scene.control.TableView?>
<?import javafx.scene.control.ToggleButton?>
<?import javafx.scene.layout.ColumnConstraints?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.RowConstraints?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>

<StackPane xmlns="http://javafx.com/javafx/25" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.dario.clinapp.controller.ContabilidadController">
   <children>
      <VBox spacing="15" style="-fx-padding: 20;">
      
          <!-- Header Section: Month/Year Selector -->
          <HBox alignment="CENTER_LEFT" spacing="10">
              <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="Mes:" />
              <ComboBox fx:id="mesComboBox" prefWidth="150" />
              <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="Año:" />
              <ComboBox fx:id="anioComboBox" prefWidth="100" />
              <Button onAction="#onActualizarClicked" style="-fx-font-weight: bold;" text="Actualizar" />
          </HBox>
      
          <Separator />
      
          <!-- Summary Cards Section -->
          <VBox spacing="15">
              <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Ingresos del Mes" />
      
              <GridPane hgap="15" vgap="15">
                  <!-- Total General Card -->
                  <VBox style="-fx-background-color: #e3f2fd; -fx-padding: 15; -fx-background-radius: 5;" styleClass="summary-card" GridPane.columnIndex="0" GridPane.rowIndex="0">
                      <Label style="-fx-font-size: 12px; -fx-font-weight: bold;" text="Total General" />
                      <Label fx:id="totalGeneralLabel" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #1976d2;" text="\$0.00" />
                  </VBox>
      
                  <!-- Diagnóstico Card -->
                  <VBox style="-fx-background-color: #fff3e0; -fx-padding: 15; -fx-background-radius: 5;" styleClass="summary-card" GridPane.columnIndex="1" GridPane.rowIndex="0">
                      <Label style="-fx-font-size: 12px; -fx-font-weight: bold;" text="Diagnósticos" />
                      <Label fx:id="diagnosticoLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #f57c00;" text="\$0.00" />
                  </VBox>
      
                  <!-- Paciente Estándar Card -->
                  <VBox style="-fx-background-color: #f3e5f5; -fx-padding: 15; -fx-background-radius: 5;" styleClass="summary-card" GridPane.columnIndex="2" GridPane.rowIndex="0">
                      <Label style="-fx-font-size: 12px; -fx-font-weight: bold;" text="Pacientes Estándar" />
                      <Label fx:id="estandarLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #7b1fa2;" text="\$0.00" />
                  </VBox>

                  <VBox style="-fx-background-color: #fff3e0; -fx-padding: 15; -fx-background-radius: 5;" styleClass="summary-card" GridPane.columnIndex="3" GridPane.rowIndex="0">
                      <Label style="-fx-font-size: 12px; -fx-font-weight: bold;" text="Mensuales" />
                      <Label fx:id="mensualLabel" style="-fx-font-size: 18px; -fx-font-weight: bold; -fx-text-fill: #f57c00;" text="\$0.00" />
                  </VBox>
               <columnConstraints>
                  <ColumnConstraints />
                  <ColumnConstraints />
                  <ColumnConstraints />
                  <ColumnConstraints />
               </columnConstraints>
               <rowConstraints>
                  <RowConstraints />
                  <RowConstraints />
               </rowConstraints>
              </GridPane>
          </VBox>
      
          <Separator />
      
          <!-- Total Debt Section -->
          <HBox alignment="CENTER_LEFT" spacing="10" style="-fx-background-color: #ffebee; -fx-padding: 15; -fx-background-radius: 5;">
              <Label style="-fx-font-size: 14px; -fx-font-weight: bold;" text="Total Adeudado:" />
              <Label fx:id="totalDeudaLabel" style="-fx-font-size: 20px; -fx-font-weight: bold; -fx-text-fill: #c62828;" text="\$0.00" />
          </HBox>
      
          <Separator />
      
          <!-- Filter Section -->
          <VBox spacing="10">
              <Label style="-fx-font-size: 16px; -fx-font-weight: bold;" text="Detalle de Deudas" />
      
              <HBox alignment="CENTER_LEFT" spacing="10">
                  <Label style="-fx-font-size: 12px;" text="Filtrar por:" />
                  <ToggleButton fx:id="mensualToggle" onAction="#onFiltroChanged" style="-fx-min-width: 100;" text="Mensuales" />
                  <ToggleButton fx:id="diagnosticoToggle" onAction="#onFiltroChanged" style="-fx-min-width: 100;" text="Diagnósticos" />
                  <ToggleButton fx:id="otrosToggle" onAction="#onFiltroChanged" style="-fx-min-width: 100;" text="Otros" />
              </HBox>
          </VBox>
      
          <!-- Table Section -->
          <TableView fx:id="deudaTable" VBox.vgrow="ALWAYS">
              <columns>
                  <TableColumn fx:id="nombreColumn" prefWidth="200" text="Paciente" />
                  <TableColumn fx:id="deudaTotalColumn" prefWidth="120" text="Deuda Total" />
                  <TableColumn fx:id="tipoPacienteColumn" prefWidth="150" text="Tipo Paciente" />
                  <TableColumn fx:id="sesionesColumn" prefWidth="150" text="Sesiones Pendientes" />
                  <TableColumn fx:id="informesColumn" prefWidth="150" text="Saldo Informes" />
                  <TableColumn fx:id="diagnosticoColumn" prefWidth="120" text="Saldo Diagnóstico" />
              </columns>
          </TableView>
      
      </VBox>
   </children>
</StackPane>
